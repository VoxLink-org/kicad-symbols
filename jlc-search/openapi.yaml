openapi: 3.1.0
info:
  title: Smart JLCPCB Component Search
  description: >
    Advanced search for electronic components on JLCPCB.
    It utilizes specific endpoints for different component types (Resistors, Capacitors, MCUs, etc.) 
    to provide highly accurate results, combined with detailed electrical specs and datasheets.
  version: 2.0.0
servers:
  - url: https://jlc-component-search.wanghsinche.workers.dev
paths:
  /search:
    get:
      operationId: searchComponents
      summary: Search for components with specific parameters.
      description: >
        Use this tool to find parts. 
        CRITICAL: Always specify the `category` if known (e.g., 'resistor', 'capacitor').
        This ensures the correct database is queried (e.g., matching resistance values accurately).
      parameters:
        - name: category
          in: query
          required: false
          schema:
            type: string
            enum: [resistor, capacitor, inductor, mosfet, diode, mcu, adc, regulator, led, connector]
          description: >
            The type of component. 
            If not specified, a generic text search is performed (less accurate for passives).
        
        - name: q
          in: query
          required: false
          schema:
            type: string
          description: >
            Generic keywords or part number (e.g., "STM32F103", "ADS1292").
            Use this if `category` is not specified.
        
        - name: package
          in: query
          required: false
          schema:
            type: string
          description: Footprint/Package (e.g., "0603", "0805", "SOIC-8", "LQFP-48").
        
        - name: value
          in: query
          required: false
          schema:
            type: string
          description: >
            The main value of the component. 
            For Resistors: "10k", "1k", "4.7k".
            For Capacitors: "10uF", "100nF", "22pF".
            For Inductors: "10uH".
        
        - name: limit
          in: query
          schema:
            type: integer
            default: 5
        
        # --- Specific Parameters (Pass through) ---
        - name: tolerance
          in: query
          required: false
          schema:
            type: string
          description: For resistors/capacitors (e.g., "1%", "5%").
        
        - name: voltage
          in: query
          required: false
          schema:
            type: string
          description: Voltage rating (e.g., "16V", "50V").
        
        - name: search
          in: query
          required: false
          schema:
             type: string
          description: Additional keyword search within the specific category.

      responses:
        '200':
          description: JSON list of components with stock and specs.
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    lcsc_id: { type: string }
                    mfr_part: { type: string }
                    stock: { type: integer }
                    price_usd: { type: number }
                    description: { type: string }
                    datasheet: { type: string }
                    specs: { type: object }